---
layout: post
title:  "PyQT"
date:   2023-07-30
excerpt: ""
tag:
- announcement
comments: true
---

## PyQt란
### PyQT는 파이썬에서 앱(app)을 만들 수 있도록 하게 해주는 패키지이며, 실전에선 사용되지 않을 것 같지만 프로젝트를 위해 배운다.

## GUI Application
### GUI = Graphic User Interface : 쉽게 생각하면 유저의 화면이라고 생각하면 된다.

## QLabel 예제
	import sys
	from PyQt5.QtWidgets import *
 
	app = QApplication(sys.argv)
	label = QLabel('Hello World!')
	label.show()
	app.exec_()

## 코드 설명
### 2줄 : PyQt5 패키지내 QtWidgets 모듈의 모든 요소를 import, 즉 가져온다.
### 4,7줄 : QApplication 객체를 만들고, exec_()를 통해 이벤트 루프 상태에 돌입. 윈도우를 만드는 것은 아니다.
### 5,6줄 : QLabel위젯에 대한 객체 생성 후 출력

**윈도우 생성 없이 자동으로 생성** : 윈도우 없이 바로 QtWidgets 하위 클래스(QLabel..)의 객체를 만들면 자동으로 윈도우를 생성
{: .notice}

**이벤트 루프** : 무한 반복하면서 이벤트를 처리하는 상태로 일반적인 콘솔 프로그램처럼 종료되지 않고 대기상태
{: .notice}

## QPushButton 예제

	import sys
	from PyQt5.QtWidgets import *
 
	app = QApplication(sys.argv)
	button = QPushButton('Hello World!')
	button.show()
	app.exec_()

 ## 코드 설명
 ### 5줄 : QPushButton위젯에 대한 객체 생성 후 출력

 ## 이벤트 처리 예제

	import sys
	from PyQt5.QtWidgets import *
 
	def pressed():
		print('클릭!')
    
	app = QApplication(sys.argv)
	button = QPushButton('Hello World!')
	button.clicked.connect(pressed)
	button.show()
	app.exec_()

## 코드 설명
### 4-5줄 : 함수선언
### 9줄 : QPushButton위젯의 클릭에 대한 이벤트는 clicked시그널(signal)이 발생, 시그널이 발생했을 때 호출되는 함수(pressed)를 slot이라고 하며, signal과 slot을 연결.
### connect()함수는 QObject클래스의 함수로써 QObject클래스나 이로부터 상속된 객체의 특정 함수를 호출할 때 다른 객체의 함수를 자동으로 호출하도록 연결

## Event Handler : 이벤트(시그널) 처리를 할 때 사용되는 함수

| 이벤트 핸들러 | 설명 |
|:--------|--------:|
| keyPressEvent | 키보드를 눌렀을 때 동작 |
| keyReleaseEvent | 키보드를 눌렀다가 뗄 때 동작 |
| resizeEvent | 위젯의 크기를 변경할 때 동작 |
| moveEvent | 위젯이 이동할 때 동작 |
| mouseMoveEvent | 마우스를 움직일 때 동작 |
| mousePressEvent | 마우스를 누를 때 동작 |
| mouseDoubleClickEvent | 마우스를 더블클릭할 때 동작 |
| mouseReleaseEvent | 마우스를 눌렀다가 뗄 때 동작 |
{: rules="groups"}

## 이벤트 처리 예제 - 앞으로 이런식으로 코드를 작성한다

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtCore import *
 
	class MyWindow(QWidget):
		def __init__(self):
			super().__init__()
			self.initUI()
 
		def initUI(self):
			self.setWindowTitle('SWH Academy Window.')
			self.setGeometry(300, 300, 300, 200)
 
		def keyPressEvent(self, e):
			if e.key() == Qt.Key_F:
				self.showFullScreen()
			elif e.key() == Qt.Key_N:
				self.showNormal()
        		elif e.key() == Qt.Key_0:
            			self.close()
        
	if __name__ == "__main__":
		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())
## 코드 설명
### 14-20줄 : keyPressEvent()을 재정의하여 키를 눌렀을 때, 전체화면, 일반화면, 창 닫기 동작

## 윈도우 : 모든 위젯이 윈도우가 될 수 있지만, QMainWindow나 QDialog클래스 역시 윈도우가 가능

## QMainWindow, QMessageBox 클래스 예제

	import sys
	from PyQt5.QtWidgets import *
        
	app = QApplication(sys.argv)
	window = QMainWindow()
	button = QPushButton("눌러봐", window)
	button.move(50, 30)
 
	def click():
    		QMessageBox.about(button, "메세지 박스", "눌렀어요.")
    
	button.clicked.connect(click)
	window.show()
	app.exec_()

## 코드 설명
### 5줄 : QMainWindow위젯 클래스에 대한 객체를 만들어서 GUI생성
### 6줄 : QPushButton위젯 클래스의 생성자를 호출할 때, 두번째 매개변수로 부모인 QMainWindow 객체를 지정하여 QMainWindow 객체 위에 QPushButton 객체를 올려둔다.
### 7줄 : QPushButton의 위치를 지정
### 9-10줄 : click함수를 만들어 메세지 박스인 QMessageBox 객체를 생성
### 12줄 : click함수를 QPushButton 객체의 clicked signal과 연결

## QMainWindow 클래스의 기능 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtGui import QIcon
	from PyQt5.QtCore import Qt
 
	app = QApplication(sys.argv)
	window = QMainWindow()
 
	window.setWindowTitle("SWH")
	window.setWindowIcon(QIcon('favicon.ico'))
	window.setGeometry(400, 300, 300, 100)
 
	window.setAutoFillBackground(True)
	p = window.palette()
	p.setColor(window.backgroundRole(), Qt.darkRed)
	window.setPalette(p)
 
	window.show()
	app.exec_()

## 코드 설명
### 9-10줄 : 윈도우 타이틀, 아이콘 설정(10번째 줄에서 favicon.ico는 본인이 원하는 이미지로 교체한다)
### 11줄 : 윈도우의 위치 설정 setGeometry(x, y, width, height)
### 13-16줄 : 윈도우 배경색을 설정.

## QMainWindow 클래스 상속

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtGui import QIcon
	from PyQt5.QtCore import Qt
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.title = 'SWH Academy Window.'
        		self.left = 200
        		self.top = 200
		        self.width = 400
        		self.height = 300
        		self.initUI()
     
    		def initUI(self):
        		self.setWindowTitle(self.title)
        		self.setWindowIcon(QIcon('favicon.ico'))
        		self.setGeometry(self.left, self.top, self.width, self.height)
        
        		self.setAutoFillBackground(True)
        		p = self.palette()
        		p.setColor(self.backgroundRole(), Qt.darkRed)
        		self.setPalette(p)
     
	if __name__ == '__main__':
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 6줄 : QMainWindow위젯을 상속한 MyWindow클래스(QWidget도 상속 가능)를 만들어 나만의 UI를 생성
### 8줄 : MyWindow 객체를 생성할 때, super()을 사용하여 부모클래스인 QMainWindow의 생성자를 호출하여 초기화.
**자식클래스에서 생성자를 새롭게 정의하면, 생성자 첫 줄에 반드시 부모클래스의 생성자를 호출할 것.**
{: .notice}
### 26줄 : 다른 모듈에서 import할 시에 자동으로 수행되지 않게 설정
### 29줄 : 윈도우 보이게 설정
### 30줄 : 어플리케이션 종료시 시스템에게 정상 또는 비정상 종료를 알려주기 위해

## 윈도우 꾸미기 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtGui import QIcon
	import webbrowser
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
     
    		def initUI(self):
        		self.setWindowTitle('SWH Academy Window.')
        		self.setGeometry(200, 200, 300, 200)
        
        		self.statusBar().showMessage(' Copyright © SWH Academy.')
     
        		twitterAction = QAction(QIcon('twitter.png'), '트위터', self)
        		twitterAction.setShortcut('Ctrl+T')
		        twitterAction.setStatusTip('트위터')
        		twitterAction.triggered.connect(self.twitterWebBrowser)
        
        		facebookAction = QAction(QIcon('facebook.png'), '페이스 북', self)
        		facebookAction.setShortcut('Ctrl+F')
        		facebookAction.setStatusTip('페이스 북')
        
        		instagramAction = QAction(QIcon('instagram.png'), '인스타그램', self)
        		instagramAction.setShortcut('Ctrl+I')
        		instagramAction.setStatusTip('인스타그램')
 
        		menubar = self.menuBar()
        		menubar.setNativeMenuBar(False)
        		menu = menubar.addMenu('&Site')
        		menu.addAction(twitterAction)
        		menu.addAction(facebookAction)
        		menu.addAction(instagramAction)
        
        		self.siteToolbar = self.addToolBar('사이트')
        		self.siteToolbar.addAction(twitterAction)
        		self.siteToolbar.addAction(facebookAction)
        		self.siteToolbar.addAction(instagramAction)
        
    		def twitterWebBrowser(self):
        		webbrowser.open('http://twitter.com')
        
	if __name__ == '__main__':
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 4줄 : 웹 브라우저를 열기 위한 webbrowser모듈 import
### 16줄 : 17-19줄과 동일한 의미로 윈도우의 상태바를 얻은 후, 메세지 설정
### 20-22,25-27,29-31줄 : 각각의 사이트에 대한 동작들을 추가. 아이콘과 메뉴이름, 단축키와 메뉴에 마우스를 올렸을 때 상태바에 나타날 StatusTip설정
### 23줄 : 트위터 메뉴 선택 시 triggered시그널에 대한 twitterWebBrowser()콜백함수 슬롯에 등록
### 33줄 : 윈도우에 대한 메뉴바를 얻는 코드로 35줄과 동일한 의미
### 35줄 : macOS에서도 Window와 같은 메뉴바를 얻을 수 있도록 설정
### 36-39줄 : 메뉴를 만들고, &기호를 통해 단축키를 등록한 뒤, 각각의 사이트에 대한 동작을 추가
### 46-47줄 : 웹 브라우저을 오픈하는 함수

# 위젯

# QPushButton

## 이벤트와 콜백함수 연결 예제
	import sys
	from PyQt5.QtWidgets import *
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
        
    		def initUI(self):
        		self.setWindowTitle("SWH")
 
        		button = QPushButton("눌러봐", self)
        		button.move(50, 30)
        		button.clicked.connect(self.pressed)
 
    		def pressed(self):
        		QMessageBox.about(self, "메세지 박스", "눌렀어요.")
 
	if __name__ == "__main__":
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 6줄 : MyWindow 객체를 생성할 때, super()을 사용하여 부모클래스인 QMainWindow의 생성자를 호출하여 초기화.
### 14줄 : QPushButton위젯의 클릭에 대한 이벤트는 clicked시그널(signal)이 발생, 시그널이 발생했을 때 호출되는 함수(pressed)를 slot이라고 하며, signal과 slot을 연결
### 16-17줄 : pressed함수를 만들어 메세지 박스인 QMessageBox 를 띄움

## 윈도우 종료 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtCore import *
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
        
    		def initUI(self):
        		self.setWindowTitle("SWH")
 
        		button = QPushButton("눌러봐", self)
        		button.move(50, 30)
        		button.clicked.connect(QCoreApplication.instance().quit)
 
	if __name__ == "__main__":
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 15줄 : QCoreApplication.instance()는 QApplication클래스의 객체인 app와 동일한 객체로 클릭 이벤트 발생 시 app객체의 quit()메소드와 연결

# QLabel

## 값 변경 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtCore import *
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
 
    		def initUI(self):
        		self.setWindowTitle('SWH Academy Window.')
        		self.setGeometry(200, 200, 360, 100)
 
        		self.label = QLabel("", self)
        		self.label.move(120, 20)
        		self.label.resize(150, 30)
 
        		button1 = QPushButton("클릭", self)
        		button1.move(20, 50)
        		button1.clicked.connect(self.button1Clicked)
 
        		button2 = QPushButton("지우기", self)
        		button2.move(130, 50)
        		button2.clicked.connect(self.button2Clicked)
        
        		button3 = QPushButton("종료", self)
        		button3.move(240, 50)
        		button3.clicked.connect(QCoreApplication.instance().quit)
 
    		def button1Clicked(self):
        		self.label.setText("버튼이 클릭되었습니다.")
 
    		def button2Clicked(self):
        		self.label.clear()
        
	if __name__ == "__main__":
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 14줄 : QLabel생성자를 호출하려 빈 텍스트인 label 객체생성. QLabel객체가 self인 인스턴스 변수로 만들어야 다른 함수에서 접근이 가능
### 생성자의 두번째 매개변수는 부착할 윈도우인 QMainWindow클래스를 상속한 MyWindow클래스의 객체
### 20,24,28줄 : 시그널에 대한 이벤트 슬롯 등록
### 30-31줄 : button1 클릭 시 label의 텍스트 설정
### 33-34줄 : button2 클릭 시 label의 텍스트값 지움

## 이미지 삽입 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtCore import *
	from PyQt5.QtGui import *
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
 
    		def initUI(self):
        		self.setWindowTitle('SWH Academy Window.')
        		self.setGeometry(200, 200, 360, 150)
 
        		self.label = QLabel("", self)
        		self.label.move(90, 20)
        		self.label.resize(172, 60)
        		self.img = QPixmap("poster.png")
        		self.button1Clicked()
 
        		button1 = QPushButton("클릭", self)
        		button1.move(20, 90)
        		button1.clicked.connect(self.button1Clicked)
 
        		button2 = QPushButton("지우기", self)
        		button2.move(130, 90)
        		button2.clicked.connect(self.button2Clicked)
        
        		button3 = QPushButton("종료", self)
        		button3.move(240, 90)
        		button3.clicked.connect(QCoreApplication.instance().quit)
 
    		def button1Clicked(self):
        		self.label.setPixmap(self.img)
 
    		def button2Clicked(self):
        		self.label.clear()
        
	if __name__ == "__main__":
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 4줄 : QPixmap클래스를 사용하기 위해 import
### 18-19줄 : QPixmap을 사용하여 그림 이미지 객체를 생성
### 34줄 : label의 값을 QPixmap객체로 지정

**QPicture : QPainter을 통해 이미지를 기록하고 그릴 때 사용**
{: .notice}
**QImage : QPixmap와 유사. 픽셀을 조작을 위해 설계되고 최적화**
{: .notice}
**QPixmap : 이미지 자체를 객체로 사용. 파일이 이미 존재하는 것이므로 QImage보다 훨씬 빠름**
{: .notice}

# QLineEdit

## 값 변경을 통한 Label 변경 예제

	import sys
	from PyQt5.QtWidgets import *
	from PyQt5.QtCore import *
 
	class MyWindow(QMainWindow):
    		def __init__(self):
        		super().__init__()
        		self.initUI()
 
    		def initUI(self):
        		self.setWindowTitle('SWH Academy Window.')
        		self.setGeometry(200, 200, 360, 100)
 
        		self.label = QLabel("", self)
        		self.label.move(120, 20)
        		self.label.resize(150, 30)
 
        		self.lineEdit = QLineEdit("", self)
        		self.lineEdit.move(20, 50)
        		self.lineEdit.textChanged.connect(self.lineEditChanged)
 
        		button2 = QPushButton("지우기", self)
        		button2.move(130, 50)
        		button2.clicked.connect(self.button2Clicked)
        
        		button3 = QPushButton("종료", self)
        		button3.move(240, 50)
        		button3.clicked.connect(QCoreApplication.instance().quit)
 
    		def lineEditChanged(self):
        		self.label.setText(self.lineEdit.text())
 
    		def button2Clicked(self):
        		self.label.clear()
        		self.lineEdit.clear()
        
	if __name__ == "__main__":
    		app = QApplication(sys.argv)
    		window = MyWindow()
    		window.show()
    		sys.exit(app.exec_())

## 코드 설명
### 18줄 : QLineEdit생성자를 호출하려 빈 텍스트인 lineEdit 객체생성.
### 20줄 : QLineEdit의 시그널인 textChanged에 대한 이벤트 슬롯인 lineEditChanged 등록
### 30-31줄 : lineEdit 값 변경 시 label의 텍스트 값을 lineEdit 값으로 설정
### 35줄 : button2 클릭 시 lineEdit의 텍스트값 지움
